익스프레스 프로젝트



https로 돌아가지 않을 수 있다. 다른것들도 있지만 확장성도 좋기에 많이쓴다.

오픈소스는 다운로드 수 많은 게 성공 가능성이 높다. (익스프레스도 노드에서 가장 안전한 것)



[npm init으로 package.json을 만들고(또는 직접 입력하고 js파일에서 npm i까지 완료) 터미널에서 파일 위치는 package.json의 위치로 가는 걸 기본으로 생각하자]



app.js

reauire(‘express’)를 통해 express를 가져오는데 이도 내부에는 https를 사용하기 때문에 결론적으로 https를 사용하는것과 다름없다. 

node app는 익스프레스에서 index를 대체하는 것이다. 

app에다 메소드를 붙여주면 if문으로 구별하지 않고 편하게 메소드를 구분할 수 있다. (app.get(‘/‘, (req, res) =>…또는 app.post(‘/about‘, (req, res) =>…)



서버의 포트번호를 직접 입력해도 좋지만 간편하게 app.set(‘port’, ~~)로 지정할 수 있다. 더 나아가서 ~~에 process.env.PORT || 포트번호 를 입력하고 터미널에서 포트를 종료하고 SET PORT-포트번호 를 입력해도 지정할 수 있다. (Set port를 하는 건 웬만하면 사용하지는 말자)



nodemon은 비슷하게 서버인데 알아서 404와 같은 에러처리를 해준다. 

파일의 변환으로 인해 서버를 재시작 해주기도 한다. 서버를 종료하고 다시 시작할 필요가 없다. 

npm i > npm start하니 nodemon이 제대로 실행된다.



index.html을 js에 보내기 위해서는 res.send -> res.sndfile로 바꾸어 적용하고픈 메소드에 html을 전달할 수 있다. :) res.sendfile(‘./index.html’)

파일의 경로를 자세히하기 위해서 const path를 선언하기도 한다. 



서버는 http와 같은 기반 개념을 이해하는 것이 중요하다. 

package.json의 내용을 ls를 실행해서 유무를 알 수 있다. (npm list)

노드몬 자체는 html을 감시해서 반영하지는 않지만 실행할 때 마다 다시 파일을 불러오기 때문에 변화를 받아들인다. 



app.get, app.post등으로 주소를 분리하면 간단하게 표현할 수 있어 좋기는 하지만 공통적 코드를 실행할 때 각각 입력해야 한다는 문제가 생긴다. 이를 해결하기 위해 미들웨어가 있다.

미들웨어는 공통된 코드를 위쪽으로 빼준 뒤 use메소드 안에 넣는다. (참고로 app.메서드(주소, …)구조를 라우트라고 한다.) 그리고 실행할 공통코드 뒤에 next를 작성해야 원래 실행되어야 할 코드들이 실행된다. 

라우트 안에 작성된 주소는 localhost번호 이후의 주소라고 볼 수 있는데 각 라우트마다 주소가 일치할 경우 서버에서 실행되는 구조이다. 그리고 코드들은 위에서 아래로 실행됨을 주의해야 한다. 

라우트 매개변수- 카테고리마다 라우트가 있을 경우 공통된 것을 선언한 다음 들어가는 이름에 따라 다르게 호출하는 방식이다. 예시로는 app.get(‘/category/:name, (req, res) => {

res.send(‘hello $(req.params.name);

req= request, res= response 매개변수이므로 이름은 임의로 변환 가능하다. 노드느 js이므로 함수의 매개변수를 자기 마음대로 짓는 것을 생각하면 당연한 이야기이다. 그리고 req, res의 순서가 변해도 된다. 

위에서 아래로 실행되기 때문에 모든것에 대해 적용되는 요청, 매개변수(와일드카드)와 같은 넓은 범위의 요청은 아래에 위치해야 한다. 